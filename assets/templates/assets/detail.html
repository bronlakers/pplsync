{% extends "base.html" %}
{% block title %}Asset {{ asset.asset_tag }} | BizTrack{% endblock %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <h3>Asset: {{ asset.asset_tag }}</h3>
  <a class="btn btn-outline-secondary" href="{% url 'asset_list' %}">Back</a>
</div>

<div class="card shadow-soft mb-3">
  <div class="card-body">
    <div class="row">
      <div class="col-md-6"><div class="text-muted">Model</div><div class="fs-5">{{ asset.model|default:"—" }}</div></div>
      <div class="col-md-6"><div class="text-muted">Serial</div><div class="fs-5">{{ asset.serial_no|default:"—" }}</div></div>
    </div>
    <hr>
    <div class="row">
      <div class="col-md-4"><div class="text-muted">Status</div><div class="fs-5">{{ asset.get_status_display }}</div></div>
      <div class="col-md-4"><div class="text-muted">Warranty end</div><div class="fs-5">{{ asset.warranty_end|default:"—" }}</div></div>
      <div class="col-md-4"><div class="text-muted">Condition</div><div class="fs-5">{{ asset.condition|default:"—" }}</div></div>
    </div>
    <div class="mt-3 d-flex gap-2">
      <a class="btn btn-primary" href="{% url 'asset_assign' asset.id %}">Assign</a>
      <a class="btn btn-outline-danger" href="{% url 'asset_return' asset.id %}">Return</a>
    </div>
  </div>
</div>

<div class="card shadow-soft">
  <div class="card-header">Assignment history</div>
  <div class="table-responsive">
    <table class="table table-sm mb-0">
      <thead><tr><th>Employee</th><th>Assigned</th><th>Returned</th><th>Notes</th></tr></thead>
      <tbody>
      {% for h in asset.assignments.all %}
        <tr>
          <td>{{ h.employee.full_name }}</td>
          <td>{{ h.assigned_at|date:"Y-m-d H:i" }}</td>
          <td>{{ h.returned_at|date:"Y-m-d H:i"|default:"—" }}</td>
          <td>{{ h.notes|default:"" }}</td>
        </tr>
      {% empty %}
        <tr><td colspan="4" class="text-muted p-3">No assignments yet.</td></tr>
      {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
